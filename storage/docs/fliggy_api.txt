酒景分销接口文档v1版本一、前言1、文档概述本文档是针对飞猪酒景分销所作说明文档，接口版本为v1，适用于飞猪现在所有酒景分销的对接。2、名词解释（1）分销商识别码：分销商的唯一识别码。（2）接口格式：format，支持json，xml。按指定的接口格式，解析或响应数据。（3）分销商私钥：用于加签、验签时使用的私钥参数。每个独立的私钥都有独立的公钥与之对应，私钥用于加签，公钥用于验签。（4）sign：分销商签名或验证时使用3、接口地址向飞猪业务人员申请开通分销渠道接口并提供访问飞猪接口的分销商IP，申请入驻成功后。分销商将会获得以下账户相关信息：（1）分销商密钥privateKey（2）分销商识别码distributorId（3）正式接口地址：https://api.alitrip.alibaba.com（4）测试环境地址：https://pre-api.alitrip.alibaba.com（5）接口访问方式为：http协议、post请求方式。4、请求及响应数据格式飞猪分销各接口支持json和xml格式的请求及响应。如分页拉取产品基本信息接口，接口请求数据结构示例如下：（1）指定format=json{"distributorId":"分销商编码""timestamp":13位时间戳,"sign":"签名sign","pageNo":页码，如：1,"pageSize":页大小，如：10}（2）指定format=xml<?xml version="1.0" encoding="UTF-8" ?><request><distributorId>分销商编码</distributorId><timestamp>13位时间戳</timestamp><sign>加签sign</sign><pageNo>页码，如：1</pageNo><pageSize>页大小，如：10</pageSize></request>二、产品信息接口1、批量获取产品基本信息接口 queryProductBaseInfoByPage业务场景：（1）分销商定时获取飞猪提供的所有分销的酒景产品基本信息时（2）分销商全量产品数据信息初始化和提取产品id列表时（3）调用处理流程接口说明：分销商通过调用此接口，获取产品基本信息后，用于前端页面展示接口地址：https://api.alitrip.alibaba.com/api/v1/hotelticket/queryProductBaseInfoByPage?format=json|xml签名参数：param = distributorId_timestamp_接口描述：（1）请求参数参数名 是否必填 参数类型 参数说明distributorId Y Long 分销商编码timestamp Y Long 13位时间戳sign Y String 签名参数pageNo Y Integer 页码pageSize Y Integer 每页大小。取值范围：1~100（2）响应参数参数名称 是否必填 参数类型success Y Booleancode N Stringmsg N Stringdata N ObjectdataproductBaseInfos List<ProductBaseInfo> 产品基本信息列表，见5.1《产品基础信息模型》2、批量获取产品基本信息接口 queryProductBaseInfoByIds业务场景：（1）分销商定时获取飞猪提供的所有分销的酒景产品基本信息时（2）分销商全量产品数据信息初始化时（3）调用处理流程接口说明：分销商通过调用此接口，获取产品基本信息后，用于前端页面展示接口地址：https://api.alitrip.alibaba.com/api/v1/hotelticket/queryProductBaseInfoByIds?format=json|xml签名参数：param = distributorId_timestamp_productIds接口描述：（1）请求参数参数名 是否必填 参数类型 参数说明distributorId Y Long 分销商编码timestamp Y Long 13位时间戳sign Y String 签名参数productIds Y List<String> 产品Id列表，单批次不能大于100（2）响应参数参数名称 是否必填 参数类型success Y Booleancode N Stringmsg N Stringdata N ObjectdataproductBaseInfos List<ProductBaseInfo> 产品基本信息列表，见5.1《产品基础信息模型》3、获取产品详情接口 queryProductDetailInfo业务场景：（1）分销商需要获取产品的预定、入园、价库、限购、退款、景区等信息时（2）分销商需要全量初始化时使用（3）调用处理流程接口地址：https://api.alitrip.alibaba.com/api/v1/hotelticket/queryProductDetailInfo?format=json|xml签名参数：param = distributorId_timestamp_productId接口描述：每次只能获取1个产品的详情信息。（1）请求参数参数名 是否必填 参数类型 参数说明distributorId Y Long 分销商编码timestamp Y Long 13位时间戳sign Y String 签名参数productId Y String 产品Id（2）响应参数参数名称 是否必填 参数类型success Y Booleancode N Stringmsg N Stringdata N ObjectdataproductBaseInfo ProductBaseInfo 产品基础信息，见5.1 《产品基础信息》advanceBooking AdvanceBooking 提前预定信息productPriceStock ProductPriceStock 价库信息，见5.3 《价库模型》refund Refund 退款信息travelerInfo TravelerInfo 出行人信息confirmRule ConfirmRuleInfo 确认规则信息AdvanceBookingadvanceBookingDays Integer 提前预定天数，格式：当天-前30天即0-30天。配合提前预定时间一起使用。指当前产品需要提前几天，几点预定。例如提前预定天数为1，提前约定时间为16：00，当前时间为1月1号，则在1月1号16点前可预订1月2号的票，16点后可预订1月3号的票。实际可预订日期以价格日历为准advanceBookingTime String 提前约定时间，格式：HH:mmRefundrefundType String 退款类型。取值：ANY_TIME_REFUND 随时退CONDITION_REFUND 有条件退CAN_NOT_REFUND 不可退conditionRefunds List<ConditionRefund> 退款规则列表ConditionRefundconditionRefundType String 条件退款类型。取值：TRAVEL_DATE_PRE 出行日前TRAVEL_DAY 出行日WITH_IN_PERIOD 游玩有效期内TRAVEL_DATE_NEXT 出行日期后OTHER 其他UNKNOWN 未知feeType String 退款手续费类型。取值：AMOUNT-按金额PERCENT-按百分比days Integer 出游前多少天或出游后多少天hours Integer 允许退款的最后时间点，小时minutes Integer 允许退款的最后时间点，分钟chargeAmount BigDecimal 退款手续费数值，与feeType字段搭配使用：当feeType=AMOUNT，单位为元。如：30代表30元当feeType=PERCENT，为百分比。如: 30表示30%TravelerInfotravellerNumberType String 出行人数量类型：N_TRAVELLER_EACH_ORDER-每单N人，N_TRAVELLER_EACH_STOCK-每份N人，ALL_TRAVELLER_EACH_STOCK-每份所有人示例：1.【每单1人】例如：1笔订单买了3份，只需填写1个出行人信息2.【每份N人】例如：1笔订单买了3份，只需要填写（N * 3）个出行人信息travellerNumber Integer 出行人数量，与travellerNumberType搭配使用travellerFieldTypes List<String> 需要的出行人信息字段：NAME-姓名,NAME_PINYIN-姓名拼音,FIRST_NAME-姓,LAST_NAME-名,GENDER-性别,BIRTHDAY-生日,PHONE_CODE-电话区号,PHONE_NUMBER-电话号码,EMAIL-电子邮箱,NATIONALITY-国籍,HEIGHT-身高,WEIGHT-体重,SHOE_SIZE-鞋码certificatesTypes List<Integer> 出行人证件类型列表，可能多个：3 身份证号4 军官证5 台胞证6 港澳通行证7 国际海员8 外国人永久居留（身份）证10 警官证11 士兵证12 台湾通行证13 入台证14 户口本15 出生证明16 驾驶证17 港澳居民居住证18 台湾居民居住证19 护照20 港澳台居民往返内地通行证（回乡证）travellerCertificateFields List<CertificateField> 证件字段CertificateFieldcertificatesType Integer 证件类型，含义同certificatesTypescertificateFieldTypes List<String> 所需证件字段类型：CERTIFICATE_NUMBER-证件号码,CERTIFICATE_ISSUE_DATE-证件初次签发时间,CERTIFICATE_EXPIRATION_DATE-证件有效期,CERTIFICATE_EFFECTIVE_START_DATE-证件有效开始时间,CERTIFICATE_ISSUE_PLACE-证件签发地,RECEIVE_TICKET_ADDRESS-接收罚单地址(驾驶证专属),ConfirmRuleInfoconfirmType Integer 确认方式：0-即时确认,1-二次确认confirmMinutes Integer 二次确认时长，单位：分钟4、批量获取价格/库存信息接口 queryProductPriceStock业务场景：（1）分销商可以定时获取飞猪提供的所有分销的酒景产品的时间价格、库存信息（2）分销商需要全量数据初始化时使用（3）调用处理流程接口说明：分销商调用此接口获取产品的库存和价格信息（单位：天）接口地址：https://api.alitrip.alibaba.com/api/v1/hotelticket/queryProductPriceStock?format=json|xml签名参数：param = distributorId_timestamp_productId接口描述：（1）请求参数请求参数参数名 是否必填 参数类型 参数说明distributorId Y Long 分销商编码timestamp Y Long 13位时间戳sign Y String 签名参数productId Y String 产品IdbeginTime N Long 价库开始时间（大于等于）。13位时间戳endTime N Long 价库结束时间（小于等于）。13位时间戳（2）响应参数响应参数参数名称 是否必填 参数类型success Y Booleancode N Stringmsg N Stringdata N ObjectdataproductPriceStock ProductPriceStock 价库信息，见5.3《价库模型》