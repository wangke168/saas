import{_ as Ne,r as m,x as Se,i as Le,c as U,o as i,f as b,b as l,w as t,d as _,k as E,E as T,l as Me,m as We,h as V,y as Ze,z as Ge,q as z,s as q,F as I,p as N,t as Ce,v as He}from"./app-DhXkCbrE.js";const Je={style:{"margin-bottom":"20px"}},Qe={key:0},Ye={key:0,style:{"margin-bottom":"20px"}},ea={key:1,style:{"margin-bottom":"20px"}},aa={style:{display:"flex",gap:"10px",width:"100%"}},la={__name:"Index",setup(ta){const ue=m([]),J=m([]),de=m([]),Q=m(!1),Y=m(!1),R=m(!1),L=m(null),ee=m(""),M=m(1),ae=m(15),ie=m(0),W=m(null),B=m(!1),Z=m(null),le=m(!1),te=m(null),x=m([]),$=m(null),G=m(null),o=m({username:"",password:"",environment:"production",sync_mode:{inventory:"manual",price:"manual",order:"manual"},order_provider:null,credentials:{ctrip:{username:"",password:""},meituan:{username:"",password:""},fliggy:{username:"",password:""}},auth:{type:"username_password",appkey:"",appsecret:"",app_id:"",token:"",access_token:"",params:[]},is_active:!0}),oe=Se(()=>W.value!==null),Ue=Se(()=>oe.value?"编辑景区":"创建景区"),v=m({name:"",code:"",address:"",contact_phone:"",description:"",software_provider_ids:[],is_active:!0}),Te={name:[{required:!0,message:"请输入景区名称",trigger:"blur"},{max:255,message:"景区名称不能超过255个字符",trigger:"blur"}],code:[{pattern:/^[a-zA-Z0-9_-]+$/,message:"景区编码只能包含字母、数字、下划线和连字符",trigger:"blur"}],contact_phone:[{pattern:/^1[3-9]\d{9}$|^0\d{2,3}-?\d{7,8}$/,message:"请输入正确的电话号码",trigger:"blur"}]},ze={"auth.type":[{required:!0,message:"请选择认证类型",trigger:"change"}],username:[{required:!0,message:"请输入默认用户名",trigger:"blur"}],password:[{min:0,max:255,message:"密码长度不能超过255个字符",trigger:"blur"}],environment:[{required:!0,message:"请选择环境",trigger:"change"}],"sync_mode.inventory":[{required:!0,message:"请选择库存同步方式",trigger:"change"}],"sync_mode.price":[{required:!0,message:"请选择价格同步方式",trigger:"change"}],"sync_mode.order":[{required:!0,message:"请选择订单处理方式",trigger:"change"}]},A=async()=>{Q.value=!0;try{const s={page:M.value,per_page:ae.value};ee.value;const e=await E.get("/scenic-spots",{params:s});ue.value=e.data.data||[],ie.value=e.data.total||0}catch(s){T.error("获取景区列表失败"),console.error(s)}finally{Q.value=!1}},$e=async()=>{try{const s=await E.get("/software-providers");J.value=s.data.data||[]}catch(s){console.error("获取软件服务商列表失败",s)}},Ee=async()=>{try{const s=await E.get("/ota-platforms");de.value=s.data.data||[]}catch(s){console.error("获取OTA平台列表失败",s)}},Ie=()=>{M.value=1,A()},Ae=()=>{W.value=null,pe(),R.value=!0},Re=s=>{W.value=s.id,v.value={name:s.name,code:s.code,address:s.address||"",contact_phone:s.contact_phone||"",description:s.description||"",software_provider_ids:s.software_providers?s.software_providers.map(e=>e.id):[],is_active:s.is_active},R.value=!0},Xe=async()=>{L.value&&await L.value.validate(async s=>{var e,r,h,d,n,c;if(s){Y.value=!0;try{if(oe.value)await E.put(`/scenic-spots/${W.value}`,v.value),T.success("景区更新成功");else{const{code:k,...f}=v.value;await E.post("/scenic-spots",f),T.success("景区创建成功")}R.value=!1,A()}catch(k){const f=((r=(e=k.response)==null?void 0:e.data)==null?void 0:r.message)||((c=(n=(d=(h=k.response)==null?void 0:h.data)==null?void 0:d.errors)==null?void 0:n.code)==null?void 0:c[0])||"操作失败";T.error(f)}finally{Y.value=!1}}})},Oe=async s=>{try{await He.confirm(`确定要删除景区"${s.name}"吗？删除后无法恢复！`,"提示",{type:"warning",confirmButtonText:"确定删除",cancelButtonText:"取消"}),await E.delete(`/scenic-spots/${s.id}`),T.success("删除成功"),A()}catch(e){e!=="cancel"&&(T.error("删除失败"),console.error(e))}},pe=()=>{var s;v.value={name:"",code:"",address:"",contact_phone:"",description:"",software_provider_ids:[],is_active:!0},(s=L.value)==null||s.clearValidate()},Pe=async s=>{te.value=s.id,se();try{const r=(await E.get(`/scenic-spots/${s.id}`)).data.data;x.value=r.software_providers||[],x.value.length===1||x.value.length>1?$.value=x.value[0].id:$.value=null}catch(e){T.error("获取景区信息失败"),console.error(e);return}B.value=!0,$.value&&await me($.value)},qe=async s=>{s?await me(s):se()},me=async s=>{var e,r,h,d,n,c,k,f,g,u,p,S,D,F,j,X,K,H,a,w,O,ce,fe,ye,ge,_e,we,be,Ve,ke,xe;try{const P=await E.get(`/scenic-spots/${te.value}/resource-config`,{params:{software_provider_id:s}});if(P.data.success&&P.data.data){const y=P.data.data,C=((e=y.extra_config)==null?void 0:e.auth)||{};let re=[];C.type==="custom"&&C.params&&(re=Object.entries(C.params).map(([he,ne])=>typeof ne=="string"&&ne.startsWith("encrypted:")?{key:he,value:"***EXISTS***"}:{key:he,value:ne})),o.value={username:y.username||"",password:y.password==="***EXISTS***"?"":y.password||"",environment:y.environment||"production",sync_mode:((r=y.extra_config)==null?void 0:r.sync_mode)||{inventory:"manual",price:"manual",order:"manual"},order_provider:((h=y.extra_config)==null?void 0:h.order_provider)||null,credentials:{ctrip:{username:((c=(n=(d=y.extra_config)==null?void 0:d.credentials)==null?void 0:n.ctrip)==null?void 0:c.username)||"",password:((g=(f=(k=y.extra_config)==null?void 0:k.credentials)==null?void 0:f.ctrip)==null?void 0:g.password)==="***EXISTS***"?"":((S=(p=(u=y.extra_config)==null?void 0:u.credentials)==null?void 0:p.ctrip)==null?void 0:S.password)||""},meituan:{username:((j=(F=(D=y.extra_config)==null?void 0:D.credentials)==null?void 0:F.meituan)==null?void 0:j.username)||"",password:((H=(K=(X=y.extra_config)==null?void 0:X.credentials)==null?void 0:K.meituan)==null?void 0:H.password)==="***EXISTS***"?"":((O=(w=(a=y.extra_config)==null?void 0:a.credentials)==null?void 0:w.meituan)==null?void 0:O.password)||""},fliggy:{username:((ye=(fe=(ce=y.extra_config)==null?void 0:ce.credentials)==null?void 0:fe.fliggy)==null?void 0:ye.username)||"",password:((we=(_e=(ge=y.extra_config)==null?void 0:ge.credentials)==null?void 0:_e.fliggy)==null?void 0:we.password)==="***EXISTS***"?"":((ke=(Ve=(be=y.extra_config)==null?void 0:be.credentials)==null?void 0:Ve.fliggy)==null?void 0:ke.password)||""}},auth:{type:C.type||"username_password",appkey:C.appkey||"",appsecret:C.appsecret==="***EXISTS***"?"":C.appsecret||"",app_id:C.app_id||"",token:C.token==="***EXISTS***"?"":C.token||"",access_token:C.access_token==="***EXISTS***"?"":C.access_token||"",params:Array.isArray(re)?re:[]},is_active:y.is_active??!0}}}catch(P){((xe=P.response)==null?void 0:xe.status)!==404&&(T.error("获取资源配置失败"),console.error(P))}},Be=async()=>{if(Z.value){if(o.value.auth.type==="custom"){const s=o.value.auth.params||[];for(let e=0;e<s.length;e++){const r=s[e];if(!r.key||r.key.trim()===""){T.warning(`第 ${e+1} 个参数的参数名不能为空`);return}!r.value||r.value.trim()===""||r.value}}await Z.value.validate(async s=>{var e,r,h,d;if(s){le.value=!0;try{const n={};for(const[f,g]of Object.entries(o.value.credentials||{}))g&&(g.username||g.password)&&(n[f]={username:g.username||"",password:g.password||""});if(!$.value){T.warning("请先选择要配置的服务商");return}let c={...o.value.auth};if(c.type==="custom"&&c.params){const f={};c.params.forEach(g=>{g.key&&g.value&&g.value!=="***EXISTS***"&&(f[g.key]=g.value)}),c.params=f}else delete c.params;const k={software_provider_id:$.value,username:o.value.username,...o.value.password&&o.value.password!=="***EXISTS***"?{password:String(o.value.password)}:{},environment:o.value.environment,is_active:o.value.is_active,sync_mode:o.value.sync_mode,order_provider:o.value.order_provider||null,credentials:Object.keys(n).length>0?n:{},auth:c};await E.post(`/scenic-spots/${te.value}/resource-config`,k),T.success("资源配置保存成功"),B.value=!1,A()}catch(n){let c="保存失败";if((r=(e=n.response)==null?void 0:e.data)!=null&&r.message)c=n.response.data.message;else if((d=(h=n.response)==null?void 0:h.data)!=null&&d.errors){const k=n.response.data.errors,f=Object.values(k)[0];c=Array.isArray(f)?f[0]:f}T.error(c),console.error("保存资源配置失败:",n)}finally{le.value=!1}}})}},se=()=>{var s;o.value={username:"",password:"",environment:"production",sync_mode:{inventory:"",price:"",order:""},order_provider:null,credentials:{ctrip:{username:"",password:""},meituan:{username:"",password:""},fliggy:{username:"",password:""}},auth:{type:"username_password",appkey:"",appsecret:"",app_id:"",token:"",access_token:"",params:[]},is_active:!0},$.value=null,G.value=null,x.value=[],(s=Z.value)==null||s.clearValidate()},De=()=>{o.value.auth.params.push({key:"",value:""})},Fe=s=>{o.value.auth.params.splice(s,1)},ve=s=>{if(!s)return!1;const e=["password","pwd","secret","key","token","auth"],r=s.toLowerCase();return e.some(h=>r.includes(h))},je=s=>{s!=="custom"&&(o.value.auth.params=[],G.value=null)},Ke=s=>{if(s)switch(o.value.auth.params=[],s){case"username_password_custom":o.value.auth.params=[{key:"user",value:""},{key:"pwd",value:""}];break;case"appkey_secret_custom":o.value.auth.params=[{key:"api_key",value:""},{key:"api_secret",value:""}];break;case"token_custom":o.value.auth.params=[{key:"access_token",value:""}];break;case"empty":o.value.auth.params=[];break}};return Le(()=>{A(),$e(),Ee()}),(s,e)=>{const r=_("el-button"),h=_("el-icon"),d=_("el-input"),n=_("el-table-column"),c=_("el-tag"),k=_("el-table"),f=_("el-pagination"),g=_("el-card"),u=_("el-form-item"),p=_("el-option"),S=_("el-select"),D=_("el-switch"),F=_("el-form"),j=_("el-dialog"),X=_("el-alert"),K=_("el-divider"),H=Me("loading");return i(),U("div",null,[e[51]||(e[51]=b("h2",null,"景区管理",-1)),l(g,null,{default:t(()=>[b("div",Je,[l(r,{type:"primary",onClick:Ae},{default:t(()=>[...e[28]||(e[28]=[V("创建景区",-1)])]),_:1}),l(d,{modelValue:ee.value,"onUpdate:modelValue":e[0]||(e[0]=a=>ee.value=a),placeholder:"搜索景区名称或编码",style:{width:"300px","margin-left":"10px"},clearable:"",onInput:Ie},{prefix:t(()=>[l(h,null,{default:t(()=>[l(Ze(Ge))]),_:1})]),_:1},8,["modelValue"])]),We((i(),z(k,{data:ue.value,border:""},{default:t(()=>[l(n,{prop:"name",label:"景区名称",width:"200"}),l(n,{prop:"code",label:"景区编码",width:"150"}),l(n,{prop:"address",label:"地址","show-overflow-tooltip":""}),l(n,{prop:"contact_phone",label:"联系电话",width:"150"}),l(n,{label:"软件服务商",width:"200"},{default:t(({row:a})=>[(i(!0),U(I,null,N(a.software_providers||[],w=>(i(),z(c,{key:w.id,style:{"margin-right":"5px","margin-bottom":"5px"}},{default:t(()=>[V(Ce(w.name),1)]),_:2},1024))),128)),!a.software_providers||a.software_providers.length===0?(i(),U("span",Qe,"-")):q("",!0)]),_:1}),l(n,{prop:"is_active",label:"状态",width:"100"},{default:t(({row:a})=>[l(c,{type:a.is_active?"success":"danger"},{default:t(()=>[V(Ce(a.is_active?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(n,{label:"操作",width:"280",fixed:"right"},{default:t(({row:a})=>[l(r,{size:"small",onClick:w=>Re(a)},{default:t(()=>[...e[29]||(e[29]=[V("编辑",-1)])]),_:1},8,["onClick"]),l(r,{size:"small",type:"info",onClick:w=>Pe(a)},{default:t(()=>[...e[30]||(e[30]=[V("配置资源方",-1)])]),_:1},8,["onClick"]),l(r,{size:"small",type:"danger",onClick:w=>Oe(a)},{default:t(()=>[...e[31]||(e[31]=[V("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,Q.value]]),l(f,{"current-page":M.value,"onUpdate:currentPage":e[1]||(e[1]=a=>M.value=a),"page-size":ae.value,"onUpdate:pageSize":e[2]||(e[2]=a=>ae.value=a),"page-sizes":[10,20,50,100],total:ie.value,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"},onSizeChange:A,onCurrentChange:A},null,8,["current-page","page-size","total"])]),_:1}),l(j,{modelValue:R.value,"onUpdate:modelValue":e[11]||(e[11]=a=>R.value=a),title:Ue.value,width:"600px",onClose:pe},{footer:t(()=>[l(r,{onClick:e[10]||(e[10]=a=>R.value=!1)},{default:t(()=>[...e[36]||(e[36]=[V("取消",-1)])]),_:1}),l(r,{type:"primary",onClick:Xe,loading:Y.value},{default:t(()=>[...e[37]||(e[37]=[V("确定",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(F,{ref_key:"formRef",ref:L,model:v.value,rules:Te,"label-width":"120px"},{default:t(()=>[l(u,{label:"景区名称",prop:"name"},{default:t(()=>[l(d,{modelValue:v.value.name,"onUpdate:modelValue":e[3]||(e[3]=a=>v.value.name=a),placeholder:"请输入景区名称"},null,8,["modelValue"])]),_:1}),oe.value?(i(),z(u,{key:0,label:"景区编码",prop:"code"},{default:t(()=>[l(d,{modelValue:v.value.code,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value.code=a),placeholder:"系统自动生成",disabled:""},null,8,["modelValue"]),e[32]||(e[32]=b("span",{style:{"margin-left":"10px",color:"#909399","font-size":"12px"}}," 景区编码由系统自动生成，不可修改 ",-1))]),_:1})):(i(),z(u,{key:1},{label:t(()=>[...e[33]||(e[33]=[b("span",null,"景区编码",-1)])]),default:t(()=>[l(d,{value:"系统自动生成",disabled:""}),e[34]||(e[34]=b("span",{style:{"margin-left":"10px",color:"#909399","font-size":"12px"}}," 景区编码将在创建时由系统自动生成 ",-1))]),_:1})),l(u,{label:"地址",prop:"address"},{default:t(()=>[l(d,{modelValue:v.value.address,"onUpdate:modelValue":e[5]||(e[5]=a=>v.value.address=a),placeholder:"请输入景区地址"},null,8,["modelValue"])]),_:1}),l(u,{label:"联系电话",prop:"contact_phone"},{default:t(()=>[l(d,{modelValue:v.value.contact_phone,"onUpdate:modelValue":e[6]||(e[6]=a=>v.value.contact_phone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),l(u,{label:"软件服务商",prop:"software_provider_ids"},{default:t(()=>[l(S,{modelValue:v.value.software_provider_ids,"onUpdate:modelValue":e[7]||(e[7]=a=>v.value.software_provider_ids=a),placeholder:"请选择软件服务商（可多选）",multiple:"",clearable:"",style:{width:"100%"}},{default:t(()=>[(i(!0),U(I,null,N(J.value,a=>(i(),z(p,{key:a.id,label:`${a.name} (${a.api_type||"无类型"})`,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[35]||(e[35]=b("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}}," 一个景区可以选择多个软件服务商，不同产品可以使用不同的服务商 ",-1))]),_:1}),l(u,{label:"描述",prop:"description"},{default:t(()=>[l(d,{modelValue:v.value.description,"onUpdate:modelValue":e[8]||(e[8]=a=>v.value.description=a),type:"textarea",rows:4,placeholder:"请输入景区描述"},null,8,["modelValue"])]),_:1}),l(u,{label:"状态",prop:"is_active"},{default:t(()=>[l(D,{modelValue:v.value.is_active,"onUpdate:modelValue":e[9]||(e[9]=a=>v.value.is_active=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(j,{modelValue:B.value,"onUpdate:modelValue":e[27]||(e[27]=a=>B.value=a),title:"资源配置",width:"900px",onClose:se},{footer:t(()=>[l(r,{onClick:e[26]||(e[26]=a=>B.value=!1)},{default:t(()=>[...e[49]||(e[49]=[V("取消",-1)])]),_:1}),l(r,{type:"primary",onClick:Be,loading:le.value},{default:t(()=>[...e[50]||(e[50]=[V("保存",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(X,{title:"重要提示",type:"warning",description:"一个景区可以有多个软件服务商，请为每个服务商单独配置参数。不同OTA平台的订单需要使用不同的用户名和密码。",closable:!1,style:{"margin-bottom":"20px"}}),x.value&&x.value.length>1?(i(),U("div",Ye,[l(S,{modelValue:$.value,"onUpdate:modelValue":e[12]||(e[12]=a=>$.value=a),placeholder:"请选择要配置的服务商",style:{width:"100%"},onChange:qe},{default:t(()=>[(i(!0),U(I,null,N(x.value,a=>(i(),z(p,{key:a.id,label:`${a.name} (${a.api_type||"无类型"})`,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])):x.value&&x.value.length===1?(i(),U("div",ea,[l(X,{title:`正在配置服务商：${x.value[0].name}`,type:"info",closable:!1},null,8,["title"])])):(i(),z(X,{key:2,title:"该景区尚未配置软件服务商",type:"warning",description:"请先在景区编辑页面添加软件服务商，然后再配置参数。",closable:!1,style:{"margin-bottom":"20px"}})),l(F,{ref_key:"resourceConfigFormRef",ref:Z,model:o.value,rules:ze,"label-width":"140px"},{default:t(()=>[l(u,{label:"认证类型",prop:"auth.type"},{default:t(()=>[l(S,{modelValue:o.value.auth.type,"onUpdate:modelValue":e[13]||(e[13]=a=>o.value.auth.type=a),style:{width:"100%"},onChange:je},{default:t(()=>[l(p,{label:"用户名密码",value:"username_password"}),l(p,{label:"AppKey/Secret",value:"appkey_secret"}),l(p,{label:"Token",value:"token"}),l(p,{label:"自定义参数",value:"custom"})]),_:1},8,["modelValue"]),e[38]||(e[38]=b("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}},' 选择认证方式，如果接口使用非标准参数名，请选择"自定义参数" ',-1))]),_:1}),o.value.auth.type==="username_password"?(i(),U(I,{key:0},[l(u,{label:"默认用户名",prop:"username"},{default:t(()=>[l(d,{modelValue:o.value.username,"onUpdate:modelValue":e[14]||(e[14]=a=>o.value.username=a),placeholder:"用于库存推送订阅等非订单场景"},null,8,["modelValue"])]),_:1}),l(u,{label:"默认密码",prop:"password"},{default:t(()=>[l(d,{modelValue:o.value.password,"onUpdate:modelValue":e[15]||(e[15]=a=>o.value.password=a),type:"password","show-password":"",placeholder:"用于库存推送订阅等非订单场景"},null,8,["modelValue"])]),_:1})],64)):q("",!0),o.value.auth.type==="appkey_secret"?(i(),U(I,{key:1},[l(u,{label:"AppKey",prop:"auth.appkey"},{default:t(()=>[l(d,{modelValue:o.value.auth.appkey,"onUpdate:modelValue":e[16]||(e[16]=a=>o.value.auth.appkey=a),placeholder:"请输入AppKey"},null,8,["modelValue"])]),_:1}),l(u,{label:"AppSecret",prop:"auth.appsecret"},{default:t(()=>[l(d,{modelValue:o.value.auth.appsecret,"onUpdate:modelValue":e[17]||(e[17]=a=>o.value.auth.appsecret=a),type:"password","show-password":"",placeholder:"请输入AppSecret"},null,8,["modelValue"])]),_:1})],64)):q("",!0),o.value.auth.type==="token"?(i(),z(u,{key:2,label:"Token",prop:"auth.token"},{default:t(()=>[l(d,{modelValue:o.value.auth.token,"onUpdate:modelValue":e[18]||(e[18]=a=>o.value.auth.token=a),type:"password","show-password":"",placeholder:"请输入Token"},null,8,["modelValue"])]),_:1})):q("",!0),o.value.auth.type==="custom"?(i(),U(I,{key:3},[l(u,{label:"参数模板"},{default:t(()=>[l(S,{modelValue:G.value,"onUpdate:modelValue":e[19]||(e[19]=a=>G.value=a),placeholder:"选择参数模板（可选）",clearable:"",style:{width:"100%"},onChange:Ke},{default:t(()=>[l(p,{label:"用户名密码（自定义参数名）",value:"username_password_custom"}),l(p,{label:"AppKey/Secret（自定义参数名）",value:"appkey_secret_custom"}),l(p,{label:"Token（自定义参数名）",value:"token_custom"}),l(p,{label:"空模板",value:"empty"})]),_:1},8,["modelValue"]),e[39]||(e[39]=b("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}}," 选择模板可以快速填充常用参数，也可以手动添加参数 ",-1))]),_:1}),l(u,{label:"自定义参数"},{default:t(()=>[l(k,{data:o.value.auth.params,border:"",style:{width:"100%"}},{default:t(()=>[l(n,{label:"参数名",width:"200"},{default:t(({row:a,$index:w})=>[l(d,{modelValue:a.key,"onUpdate:modelValue":O=>a.key=O,placeholder:"参数名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(n,{label:"参数值","min-width":"300"},{default:t(({row:a,$index:w})=>[l(d,{modelValue:a.value,"onUpdate:modelValue":O=>a.value=O,type:ve(a.key)?"password":"text","show-password":ve(a.key),placeholder:"参数值"},null,8,["modelValue","onUpdate:modelValue","type","show-password"])]),_:1}),l(n,{label:"操作",width:"100",fixed:"right"},{default:t(({$index:a})=>[l(r,{size:"small",type:"danger",onClick:w=>Fe(a)},{default:t(()=>[...e[40]||(e[40]=[V("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),l(r,{type:"primary",size:"small",style:{"margin-top":"10px"},onClick:De},{default:t(()=>[...e[41]||(e[41]=[V("添加参数",-1)])]),_:1}),e[42]||(e[42]=b("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}}," 敏感参数（包含password、secret、key、token等关键词）将自动加密存储 ",-1))]),_:1})],64)):q("",!0),l(u,{label:"环境",prop:"environment"},{default:t(()=>[l(S,{modelValue:o.value.environment,"onUpdate:modelValue":e[20]||(e[20]=a=>o.value.environment=a),style:{width:"100%"}},{default:t(()=>[l(p,{label:"生产环境",value:"production"})]),_:1},8,["modelValue"])]),_:1}),l(K,null,{default:t(()=>[...e[43]||(e[43]=[V("同步方式配置",-1)])]),_:1}),l(u,{label:"库存同步方式",prop:"sync_mode.inventory"},{default:t(()=>[l(S,{modelValue:o.value.sync_mode.inventory,"onUpdate:modelValue":e[21]||(e[21]=a=>o.value.sync_mode.inventory=a),style:{width:"100%"}},{default:t(()=>[l(p,{label:"资源方推送",value:"push"}),l(p,{label:"手工维护",value:"manual"})]),_:1},8,["modelValue"]),e[44]||(e[44]=b("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}},' 选择"资源方推送"后，系统将自动接收资源方推送的库存信息 ',-1))]),_:1}),l(u,{label:"价格同步方式",prop:"sync_mode.price"},{default:t(()=>[l(S,{modelValue:o.value.sync_mode.price,"onUpdate:modelValue":e[22]||(e[22]=a=>o.value.sync_mode.price=a),style:{width:"100%"}},{default:t(()=>[l(p,{label:"资源方推送",value:"push"}),l(p,{label:"手工维护",value:"manual"})]),_:1},8,["modelValue"]),e[45]||(e[45]=b("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}},' 选择"资源方推送"后，系统将自动接收资源方推送的价格信息 ',-1))]),_:1}),l(u,{label:"订单处理方式",prop:"sync_mode.order"},{default:t(()=>[l(S,{modelValue:o.value.sync_mode.order,"onUpdate:modelValue":e[23]||(e[23]=a=>o.value.sync_mode.order=a),style:{width:"100%"}},{default:t(()=>[l(p,{label:"系统直连",value:"auto"}),l(p,{label:"手工操作",value:"manual"}),l(p,{label:"其他系统",value:"other"})]),_:1},8,["modelValue"]),e[46]||(e[46]=b("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}},' 选择"系统直连"后，订单将自动调用资源方接口；选择"其他系统"需要指定系统服务商 ',-1))]),_:1}),o.value.sync_mode.order==="other"?(i(),z(u,{key:4,label:"订单系统服务商",prop:"order_provider"},{default:t(()=>[l(S,{modelValue:o.value.order_provider,"onUpdate:modelValue":e[24]||(e[24]=a=>o.value.order_provider=a),placeholder:"请选择系统服务商",style:{width:"100%"}},{default:t(()=>[(i(!0),U(I,null,N(J.value,a=>(i(),z(p,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):q("",!0),l(K,null,{default:t(()=>[...e[47]||(e[47]=[V("OTA平台认证信息",-1)])]),_:1}),(i(!0),U(I,null,N(de.value,a=>(i(),z(u,{key:a.id,label:`${a.name}认证信息`},{default:t(()=>[b("div",aa,[l(d,{modelValue:o.value.credentials[a.code].username,"onUpdate:modelValue":w=>o.value.credentials[a.code].username=w,placeholder:"用户名",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),l(d,{modelValue:o.value.credentials[a.code].password,"onUpdate:modelValue":w=>o.value.credentials[a.code].password=w,type:"password",placeholder:"密码",style:{flex:"1"},"show-password":""},null,8,["modelValue","onUpdate:modelValue"])]),e[48]||(e[48]=b("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}}," 该平台订单将使用此认证信息调用资源方接口 ",-1))]),_:2},1032,["label"]))),128)),l(u,{label:"状态",prop:"is_active"},{default:t(()=>[l(D,{modelValue:o.value.is_active,"onUpdate:modelValue":e[25]||(e[25]=a=>o.value.is_active=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},sa=Ne(la,[["__scopeId","data-v-03a380e7"]]);export{sa as default};
