import{_ as ul,u as sl,r as s,s as ee,i as il,c as be,o as R,f as k,b as l,w as a,d as g,j as V,E as y,k as rl,l as Ve,h as d,F as he,v as Re,n as N,x as dl,y as pl,t as x,q as Ue}from"./app-C7b5dp06.js";const ml={style:{"margin-bottom":"20px"}},vl={style:{"margin-bottom":"20px"}},cl={style:{"margin-left":"20px",color:"#909399"}},yl={style:{"margin-bottom":"20px"}},fl={style:{"margin-right":"20px"}},_l={style:{"margin-left":"10px",color:"#909399","font-size":"12px"}},gl={__name:"Index",setup(bl){const j=sl(),xe=s([]),z=s([]),le=s(!1),ae=s(!1),$=s(!1),H=s(null),P=s(""),Z=s(null),F=s(1),te=s(15),qe=s(0),K=s(null),oe=s(!1),ne=s([]),ue=s(!1),I=s(null),D=s(!1),Y=s(null),se=s(!1),B=s(null),ie=s(!1),re=s([]),de=s(!1),h=s(null),U=s(null),E=s(!1),G=s(null),pe=s(!1),M=s(!1),J=s(null),me=s(!1),O=s(null),Q=ee(()=>K.value!==null),Te=ee(()=>Q.value?"编辑酒店":"创建酒店"),ve=ee(()=>B.value!==null),$e=ee(()=>ve.value?"编辑房型":"添加房型"),p=s({scenic_spot_id:null,name:"",code:"",external_code:"",address:"",contact_phone:"",is_connected:!1,is_active:!0}),f=s({name:"",code:"",external_code:"",max_occupancy:2,description:"",is_active:!0}),q=s({dateRange:null,total_quantity:0,available_quantity:0}),b=s({date:null,total_quantity:0,available_quantity:0,source:"manual"}),Ie={scenic_spot_id:[{required:!0,message:"请选择所属景区",trigger:"change"}],name:[{required:!0,message:"请输入酒店名称",trigger:"blur"},{max:255,message:"酒店名称不能超过255个字符",trigger:"blur"}],code:[{required:!0,message:"请输入酒店编码",trigger:"blur"},{pattern:/^[a-zA-Z0-9_-]+$/,message:"酒店编码只能包含字母、数字、下划线和连字符",trigger:"blur"}],contact_phone:[{pattern:/^1[3-9]\d{9}$|^0\d{2,3}-?\d{7,8}$/,message:"请输入正确的电话号码",trigger:"blur"}]},De={name:[{required:!0,message:"请输入房型名称",trigger:"blur"}],code:[{required:!0,message:"请输入房型编码",trigger:"blur"},{pattern:/^[a-zA-Z0-9_-]+$/,message:"房型编码只能包含字母、数字、下划线和连字符",trigger:"blur"}],max_occupancy:[{required:!0,message:"请输入最大入住人数",trigger:"blur"},{type:"number",min:1,message:"最大入住人数至少为1",trigger:"blur"}]},Se={dateRange:[{required:!0,message:"请选择日期范围",trigger:"change"}],total_quantity:[{required:!0,message:"请输入总库存",trigger:"blur"},{type:"number",min:0,message:"总库存不能小于0",trigger:"blur"}],available_quantity:[{required:!0,message:"请输入可用库存",trigger:"blur"},{type:"number",min:0,message:"可用库存不能小于0",trigger:"blur"}]},ze={total_quantity:[{required:!0,message:"请输入总库存",trigger:"blur"},{type:"number",min:0,message:"总库存不能小于0",trigger:"blur"}],available_quantity:[{required:!0,message:"请输入可用库存",trigger:"blur"},{type:"number",min:0,message:"可用库存不能小于0",trigger:"blur"}]},T=async()=>{le.value=!0;try{const t={page:F.value,per_page:te.value};Z.value&&(t.scenic_spot_id=Z.value),P.value&&(t.search=P.value);const e=await V.get("/hotels",{params:t});xe.value=e.data.data||[],qe.value=e.data.total||0}catch(t){y.error("获取酒店列表失败"),console.error(t)}finally{le.value=!1}},Fe=async()=>{var t,e,n;try{if(((t=j.user)==null?void 0:t.role)!=="admin")z.value=((e=j.user)==null?void 0:e.scenic_spots)||[];else{const c=await V.get("/scenic-spots");z.value=c.data.data||[]}}catch(c){console.error("获取景区列表失败",c),(n=j.user)!=null&&n.scenic_spots&&(z.value=j.user.scenic_spots)}},Be=()=>{F.value=1,T()},Ee=()=>{F.value=1,T()},Me=()=>{K.value=null,we(),$.value=!0},Ae=t=>{K.value=t.id,p.value={scenic_spot_id:t.scenic_spot_id,name:t.name,code:t.code,external_code:t.external_code||"",address:t.address||"",contact_phone:t.contact_phone||"",is_connected:t.is_connected||!1,is_active:t.is_active},$.value=!0},Le=async()=>{H.value&&await H.value.validate(async t=>{var e,n,c,_,w,m;if(t){ae.value=!0;try{Q.value?(await V.put(`/hotels/${K.value}`,p.value),y.success("酒店更新成功")):(await V.post("/hotels",p.value),y.success("酒店创建成功")),$.value=!1,T()}catch(r){const C=((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.message)||((m=(w=(_=(c=r.response)==null?void 0:c.data)==null?void 0:_.errors)==null?void 0:w.code)==null?void 0:m[0])||"操作失败";y.error(C)}finally{ae.value=!1}}})},Ne=async t=>{try{await Ue.confirm(`确定要删除酒店"${t.name}"吗？删除后无法恢复！`,"提示",{type:"warning",confirmButtonText:"确定删除",cancelButtonText:"取消"}),await V.delete(`/hotels/${t.id}`),y.success("删除成功"),T()}catch(e){e!=="cancel"&&(y.error("删除失败"),console.error(e))}},we=()=>{var t;p.value={scenic_spot_id:null,name:"",code:"",external_code:"",address:"",contact_phone:"",is_connected:!1,is_active:!0},(t=H.value)==null||t.clearValidate()},je=async t=>{I.value=t,oe.value=!0,await ce(t.id)},ce=async t=>{ue.value=!0;try{const e=await V.get("/room-types",{params:{hotel_id:t}});ne.value=e.data.data||[]}catch(e){y.error("获取房型列表失败"),console.error(e)}finally{ue.value=!1}},He=()=>{B.value=null,Ce(),D.value=!0},Pe=t=>{B.value=t.id,f.value={name:t.name,code:t.code,external_code:t.external_code||"",max_occupancy:t.max_occupancy||2,description:t.description||"",is_active:t.is_active},D.value=!0},Ze=async()=>{Y.value&&await Y.value.validate(async t=>{var e,n,c,_,w,m;if(t){se.value=!0;try{const r={...f.value,hotel_id:I.value.id};ve.value?(await V.put(`/room-types/${B.value}`,r),y.success("房型更新成功")):(await V.post("/room-types",r),y.success("房型创建成功")),D.value=!1,await ce(I.value.id)}catch(r){const C=((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.message)||((m=(w=(_=(c=r.response)==null?void 0:c.data)==null?void 0:_.errors)==null?void 0:w.code)==null?void 0:m[0])||"操作失败";y.error(C)}finally{se.value=!1}}})},Ke=async t=>{try{await Ue.confirm(`确定要删除房型"${t.name}"吗？删除后无法恢复！`,"提示",{type:"warning",confirmButtonText:"确定删除",cancelButtonText:"取消"}),await V.delete(`/room-types/${t.id}`),y.success("删除成功"),await ce(I.value.id)}catch(e){e!=="cancel"&&(y.error("删除失败"),console.error(e))}},Ce=()=>{var t;f.value={name:"",code:"",external_code:"",max_occupancy:2,description:"",is_active:!0},(t=Y.value)==null||t.clearValidate()},Ye=()=>{I.value=null,ne.value=[],B.value=null},Ge=async t=>{h.value=t,ie.value=!0,await A(t.id)},A=async t=>{de.value=!0;try{const e={room_type_id:t};U.value&&U.value.length===2&&(e.start_date=W(U.value[0]),e.end_date=W(U.value[1]));const n=await V.get("/inventories",{params:e});re.value=n.data.data||[]}catch(e){y.error("获取库存列表失败"),console.error(e)}finally{de.value=!1}},Je=()=>{h.value&&A(h.value.id)},Oe=()=>{ke(),E.value=!0},Qe=async()=>{G.value&&await G.value.validate(async t=>{var e,n;if(t){pe.value=!0;try{const[c,_]=q.value.dateRange,w=[],m=new Date(c),r=new Date(_);for(;m<=r;)w.push({date:W(m),total_quantity:q.value.total_quantity,available_quantity:q.value.available_quantity}),m.setDate(m.getDate()+1);await V.post("/inventories",{room_type_id:h.value.id,inventories:w}),y.success("批量添加库存成功"),E.value=!1,await A(h.value.id)}catch(c){const _=((n=(e=c.response)==null?void 0:e.data)==null?void 0:n.message)||"操作失败";y.error(_)}finally{pe.value=!1}}})},We=t=>{if(t.source==="api"){y.warning("接口推送的库存不可编辑");return}O.value=t.id,b.value={date:t.date,total_quantity:t.total_quantity,available_quantity:t.available_quantity,source:t.source},M.value=!0},Xe=async()=>{J.value&&await J.value.validate(async t=>{var e,n;if(t){me.value=!0;try{await V.put(`/inventories/${O.value}`,{total_quantity:b.value.total_quantity,available_quantity:b.value.available_quantity}),y.success("库存更新成功"),M.value=!1,await A(h.value.id)}catch(c){const _=((n=(e=c.response)==null?void 0:e.data)==null?void 0:n.message)||"操作失败";y.error(_)}finally{me.value=!1}}})},el=async t=>{try{const e=t.is_closed?"open":"close";await V.post(`/inventories/${t.id}/${e}`),y.success(t.is_closed?"库存已开启":"库存已关闭"),await A(h.value.id)}catch(e){y.error("操作失败"),console.error(e)}},ke=()=>{var t;q.value={dateRange:null,total_quantity:0,available_quantity:0},(t=G.value)==null||t.clearValidate()},ll=()=>{var t;b.value={date:null,total_quantity:0,available_quantity:0,source:"manual"},(t=J.value)==null||t.clearValidate(),O.value=null},al=()=>{h.value=null,re.value=[],U.value=null,O.value=null},W=t=>{if(!t)return"";const e=new Date(t),n=e.getFullYear(),c=String(e.getMonth()+1).padStart(2,"0"),_=String(e.getDate()).padStart(2,"0");return`${n}-${c}-${_}`};return il(()=>{T(),Fe()}),(t,e)=>{const n=g("el-button"),c=g("el-option"),_=g("el-select"),w=g("el-icon"),m=g("el-input"),r=g("el-table-column"),C=g("el-tag"),ye=g("el-table"),tl=g("el-pagination"),ol=g("el-card"),v=g("el-form-item"),fe=g("el-switch"),X=g("el-form"),S=g("el-dialog"),L=g("el-input-number"),_e=g("el-date-picker"),ge=rl("loading");return R(),be("div",null,[e[56]||(e[56]=k("h2",null,"酒店管理",-1)),l(ol,null,{default:a(()=>[k("div",ml,[l(n,{type:"primary",onClick:Me},{default:a(()=>[...e[35]||(e[35]=[d("创建酒店",-1)])]),_:1}),l(_,{modelValue:Z.value,"onUpdate:modelValue":e[0]||(e[0]=o=>Z.value=o),placeholder:"筛选景区",clearable:"",style:{width:"200px","margin-left":"10px"},onChange:Ee},{default:a(()=>[(R(!0),be(he,null,Re(z.value,o=>(R(),N(c,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(m,{modelValue:P.value,"onUpdate:modelValue":e[1]||(e[1]=o=>P.value=o),placeholder:"搜索酒店名称或编码",style:{width:"300px","margin-left":"10px"},clearable:"",onInput:Be},{prefix:a(()=>[l(w,null,{default:a(()=>[l(dl(pl))]),_:1})]),_:1},8,["modelValue"])]),Ve((R(),N(ye,{data:xe.value,border:""},{default:a(()=>[l(r,{prop:"name",label:"酒店名称",width:"200"}),l(r,{prop:"code",label:"酒店编码",width:"150"}),l(r,{label:"所属景区",width:"150"},{default:a(({row:o})=>{var i;return[d(x(((i=o.scenic_spot)==null?void 0:i.name)||"-"),1)]}),_:1}),l(r,{prop:"address",label:"地址","show-overflow-tooltip":""}),l(r,{prop:"contact_phone",label:"联系电话",width:"150"}),l(r,{label:"系统服务商",width:"150"},{default:a(({row:o})=>{var i,u;return[d(x(((u=(i=o.scenic_spot)==null?void 0:i.software_provider)==null?void 0:u.name)||"-"),1)]}),_:1}),l(r,{prop:"is_connected",label:"是否直连",width:"100"},{default:a(({row:o})=>[l(C,{type:o.is_connected?"success":"info"},{default:a(()=>[d(x(o.is_connected?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"is_active",label:"状态",width:"100"},{default:a(({row:o})=>[l(C,{type:o.is_active?"success":"danger"},{default:a(()=>[d(x(o.is_active?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(r,{label:"操作",width:"300",fixed:"right"},{default:a(({row:o})=>[l(n,{size:"small",onClick:i=>je(o)},{default:a(()=>[...e[36]||(e[36]=[d("管理房型",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",onClick:i=>Ae(o)},{default:a(()=>[...e[37]||(e[37]=[d("编辑",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:"danger",onClick:i=>Ne(o)},{default:a(()=>[...e[38]||(e[38]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ge,le.value]]),l(tl,{"current-page":F.value,"onUpdate:currentPage":e[2]||(e[2]=o=>F.value=o),"page-size":te.value,"onUpdate:pageSize":e[3]||(e[3]=o=>te.value=o),"page-sizes":[10,20,50,100],total:qe.value,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"},onSizeChange:T,onCurrentChange:T},null,8,["current-page","page-size","total"])]),_:1}),l(S,{modelValue:$.value,"onUpdate:modelValue":e[13]||(e[13]=o=>$.value=o),title:Te.value,width:"600px",onClose:we},{footer:a(()=>[l(n,{onClick:e[12]||(e[12]=o=>$.value=!1)},{default:a(()=>[...e[41]||(e[41]=[d("取消",-1)])]),_:1}),l(n,{type:"primary",onClick:Le,loading:ae.value},{default:a(()=>[...e[42]||(e[42]=[d("确定",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(X,{ref_key:"formRef",ref:H,model:p.value,rules:Ie,"label-width":"120px"},{default:a(()=>[l(v,{label:"所属景区",prop:"scenic_spot_id"},{default:a(()=>[l(_,{modelValue:p.value.scenic_spot_id,"onUpdate:modelValue":e[4]||(e[4]=o=>p.value.scenic_spot_id=o),placeholder:"请选择景区",style:{width:"100%"},disabled:Q.value},{default:a(()=>[(R(!0),be(he,null,Re(z.value,o=>(R(),N(c,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),l(v,{label:"酒店名称",prop:"name"},{default:a(()=>[l(m,{modelValue:p.value.name,"onUpdate:modelValue":e[5]||(e[5]=o=>p.value.name=o),placeholder:"请输入酒店名称"},null,8,["modelValue"])]),_:1}),l(v,{label:"酒店编码",prop:"code"},{default:a(()=>[l(m,{modelValue:p.value.code,"onUpdate:modelValue":e[6]||(e[6]=o=>p.value.code=o),placeholder:"请输入酒店编码",disabled:Q.value},null,8,["modelValue","disabled"])]),_:1}),l(v,{label:"外部酒店编号",prop:"external_code"},{default:a(()=>[l(m,{modelValue:p.value.external_code,"onUpdate:modelValue":e[7]||(e[7]=o=>p.value.external_code=o),placeholder:"用于资源方系统对接的酒店编号（可选）"},null,8,["modelValue"]),e[39]||(e[39]=k("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}}," 如果配置了外部编号，系统将优先使用外部编号与资源方系统对接；如果为空，则使用酒店编码 ",-1))]),_:1}),l(v,{label:"地址",prop:"address"},{default:a(()=>[l(m,{modelValue:p.value.address,"onUpdate:modelValue":e[8]||(e[8]=o=>p.value.address=o),placeholder:"请输入酒店地址"},null,8,["modelValue"])]),_:1}),l(v,{label:"联系电话",prop:"contact_phone"},{default:a(()=>[l(m,{modelValue:p.value.contact_phone,"onUpdate:modelValue":e[9]||(e[9]=o=>p.value.contact_phone=o),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),l(v,{label:"是否直连",prop:"is_connected"},{default:a(()=>[l(fe,{modelValue:p.value.is_connected,"onUpdate:modelValue":e[10]||(e[10]=o=>p.value.is_connected=o)},null,8,["modelValue"]),e[40]||(e[40]=k("span",{style:{"margin-left":"10px",color:"#909399","font-size":"12px"}}," 开启后，系统将自动处理该酒店的订单 ",-1))]),_:1}),l(v,{label:"状态",prop:"is_active"},{default:a(()=>[l(fe,{modelValue:p.value.is_active,"onUpdate:modelValue":e[11]||(e[11]=o=>p.value.is_active=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(S,{modelValue:oe.value,"onUpdate:modelValue":e[34]||(e[34]=o=>oe.value=o),title:"房型管理",width:"1200px",onClose:Ye},{default:a(()=>{var o;return[k("div",vl,[l(n,{type:"primary",onClick:He},{default:a(()=>[...e[43]||(e[43]=[d("添加房型",-1)])]),_:1}),k("span",cl," 酒店："+x((o=I.value)==null?void 0:o.name),1)]),Ve((R(),N(ye,{data:ne.value,border:""},{default:a(()=>[l(r,{prop:"name",label:"房型名称",width:"150"}),l(r,{prop:"code",label:"房型编码",width:"150"}),l(r,{prop:"max_occupancy",label:"最大入住人数",width:"120"}),l(r,{prop:"description",label:"描述","show-overflow-tooltip":""}),l(r,{prop:"is_active",label:"状态",width:"100"},{default:a(({row:i})=>[l(C,{type:i.is_active?"success":"danger"},{default:a(()=>[d(x(i.is_active?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(r,{label:"操作",width:"250",fixed:"right"},{default:a(({row:i})=>[l(n,{size:"small",onClick:u=>Ge(i)},{default:a(()=>[...e[44]||(e[44]=[d("管理库存",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",onClick:u=>Pe(i)},{default:a(()=>[...e[45]||(e[45]=[d("编辑",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:"danger",onClick:u=>Ke(i)},{default:a(()=>[...e[46]||(e[46]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ge,ue.value]]),l(S,{modelValue:D.value,"onUpdate:modelValue":e[21]||(e[21]=i=>D.value=i),title:$e.value,width:"500px","append-to-body":"",onClose:Ce},{footer:a(()=>[l(n,{onClick:e[20]||(e[20]=i=>D.value=!1)},{default:a(()=>[...e[48]||(e[48]=[d("取消",-1)])]),_:1}),l(n,{type:"primary",onClick:Ze,loading:se.value},{default:a(()=>[...e[49]||(e[49]=[d("确定",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(X,{ref_key:"roomTypeFormRef",ref:Y,model:f.value,rules:De,"label-width":"120px"},{default:a(()=>[l(v,{label:"房型名称",prop:"name"},{default:a(()=>[l(m,{modelValue:f.value.name,"onUpdate:modelValue":e[14]||(e[14]=i=>f.value.name=i),placeholder:"请输入房型名称"},null,8,["modelValue"])]),_:1}),l(v,{label:"房型编码",prop:"code"},{default:a(()=>[l(m,{modelValue:f.value.code,"onUpdate:modelValue":e[15]||(e[15]=i=>f.value.code=i),placeholder:"请输入房型编码",disabled:ve.value},null,8,["modelValue","disabled"])]),_:1}),l(v,{label:"外部房型标识",prop:"external_code"},{default:a(()=>[l(m,{modelValue:f.value.external_code,"onUpdate:modelValue":e[16]||(e[16]=i=>f.value.external_code=i),placeholder:"用于资源方系统对接的房型标识（可选）"},null,8,["modelValue"]),e[47]||(e[47]=k("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}}," 如果配置了外部标识，系统将优先使用外部标识与资源方系统对接；如果为空，则使用房型名称。注意：必须与资源方系统中的房型名称完全一致 ",-1))]),_:1}),l(v,{label:"最大入住人数",prop:"max_occupancy"},{default:a(()=>[l(L,{modelValue:f.value.max_occupancy,"onUpdate:modelValue":e[17]||(e[17]=i=>f.value.max_occupancy=i),min:1,max:10},null,8,["modelValue"])]),_:1}),l(v,{label:"描述",prop:"description"},{default:a(()=>[l(m,{modelValue:f.value.description,"onUpdate:modelValue":e[18]||(e[18]=i=>f.value.description=i),type:"textarea",rows:3,placeholder:"请输入房型描述"},null,8,["modelValue"])]),_:1}),l(v,{label:"状态",prop:"is_active"},{default:a(()=>[l(fe,{modelValue:f.value.is_active,"onUpdate:modelValue":e[19]||(e[19]=i=>f.value.is_active=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(S,{modelValue:ie.value,"onUpdate:modelValue":e[33]||(e[33]=i=>ie.value=i),title:"库存管理",width:"1000px","append-to-body":"",onClose:al},{default:a(()=>{var i;return[k("div",yl,[k("span",fl,"房型："+x((i=h.value)==null?void 0:i.name),1),l(n,{type:"primary",onClick:Oe},{default:a(()=>[...e[50]||(e[50]=[d("批量添加库存",-1)])]),_:1}),l(_e,{modelValue:U.value,"onUpdate:modelValue":e[22]||(e[22]=u=>U.value=u),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{"margin-left":"20px"},onChange:Je},null,8,["modelValue"])]),Ve((R(),N(ye,{data:re.value,border:""},{default:a(()=>[l(r,{prop:"date",label:"日期",width:"120"},{default:a(({row:u})=>[d(x(W(u.date)),1)]),_:1}),l(r,{prop:"total_quantity",label:"总库存",width:"100"}),l(r,{prop:"available_quantity",label:"可用库存",width:"100"}),l(r,{prop:"locked_quantity",label:"锁定库存",width:"100"}),l(r,{prop:"source",label:"来源",width:"100"},{default:a(({row:u})=>[l(C,{type:u.source==="manual"?"primary":"success"},{default:a(()=>[d(x(u.source==="manual"?"人工维护":"接口推送"),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"is_closed",label:"状态",width:"100"},{default:a(({row:u})=>[l(C,{type:u.is_closed?"danger":"success"},{default:a(()=>[d(x(u.is_closed?"已关闭":"正常"),1)]),_:2},1032,["type"])]),_:1}),l(r,{label:"操作",width:"200",fixed:"right"},{default:a(({row:u})=>[l(n,{size:"small",onClick:nl=>We(u)},{default:a(()=>[...e[51]||(e[51]=[d("编辑",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:u.is_closed?"success":"warning",onClick:nl=>el(u)},{default:a(()=>[d(x(u.is_closed?"开启":"关闭"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"])),[[ge,de.value]]),l(S,{modelValue:E.value,"onUpdate:modelValue":e[27]||(e[27]=u=>E.value=u),title:"批量添加库存",width:"600px","append-to-body":"",onClose:ke},{footer:a(()=>[l(n,{onClick:e[26]||(e[26]=u=>E.value=!1)},{default:a(()=>[...e[52]||(e[52]=[d("取消",-1)])]),_:1}),l(n,{type:"primary",onClick:Qe,loading:pe.value},{default:a(()=>[...e[53]||(e[53]=[d("确定",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(X,{ref_key:"batchInventoryFormRef",ref:G,model:q.value,rules:Se,"label-width":"120px"},{default:a(()=>[l(v,{label:"日期范围",prop:"dateRange"},{default:a(()=>[l(_e,{modelValue:q.value.dateRange,"onUpdate:modelValue":e[23]||(e[23]=u=>q.value.dateRange=u),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(v,{label:"总库存",prop:"total_quantity"},{default:a(()=>[l(L,{modelValue:q.value.total_quantity,"onUpdate:modelValue":e[24]||(e[24]=u=>q.value.total_quantity=u),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(v,{label:"可用库存",prop:"available_quantity"},{default:a(()=>[l(L,{modelValue:q.value.available_quantity,"onUpdate:modelValue":e[25]||(e[25]=u=>q.value.available_quantity=u),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(S,{modelValue:M.value,"onUpdate:modelValue":e[32]||(e[32]=u=>M.value=u),title:"编辑库存",width:"500px","append-to-body":"",onClose:ll},{footer:a(()=>[l(n,{onClick:e[31]||(e[31]=u=>M.value=!1)},{default:a(()=>[...e[54]||(e[54]=[d("取消",-1)])]),_:1}),l(n,{type:"primary",onClick:Xe,loading:me.value,disabled:b.value.source==="api"},{default:a(()=>[...e[55]||(e[55]=[d(" 确定 ",-1)])]),_:1},8,["loading","disabled"])]),default:a(()=>[l(X,{ref_key:"inventoryFormRef",ref:J,model:b.value,rules:ze,"label-width":"120px"},{default:a(()=>[l(v,{label:"日期"},{default:a(()=>[l(_e,{modelValue:b.value.date,"onUpdate:modelValue":e[28]||(e[28]=u=>b.value.date=u),type:"date",placeholder:"选择日期",style:{width:"100%"},disabled:""},null,8,["modelValue"])]),_:1}),l(v,{label:"总库存",prop:"total_quantity"},{default:a(()=>[l(L,{modelValue:b.value.total_quantity,"onUpdate:modelValue":e[29]||(e[29]=u=>b.value.total_quantity=u),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(v,{label:"可用库存",prop:"available_quantity"},{default:a(()=>[l(L,{modelValue:b.value.available_quantity,"onUpdate:modelValue":e[30]||(e[30]=u=>b.value.available_quantity=u),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(v,{label:"来源"},{default:a(()=>[l(C,{type:b.value.source==="manual"?"primary":"success"},{default:a(()=>[d(x(b.value.source==="manual"?"人工维护":"接口推送"),1)]),_:1},8,["type"]),k("span",_l,x(b.value.source==="manual"?"（可编辑）":"（接口推送，不可编辑）"),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]}),_:1},8,["modelValue"])]}),_:1},8,["modelValue"])])}}},xl=ul(gl,[["__scopeId","data-v-28a21ae8"]]);export{xl as default};
