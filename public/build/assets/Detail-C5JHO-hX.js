import{r as d,x as O,i as He,c as ve,o as R,b as l,m as se,w as a,d as b,l as Le,q as Y,k as S,B as Ge,E as i,e as Je,f as U,s as re,h as u,t as m,v as ge}from"./app-C072kKQ9.js";const Ke={key:0},Qe={style:{"margin-bottom":"20px"}},We={style:{"margin-bottom":"20px"}},Xe={style:{"margin-right":"20px"}},Ze={style:{"margin-left":"10px",color:"#909399","font-size":"12px"}},al={__name:"Detail",setup(el){const D=Ge(),ue=Je(),x=d(null),j=d(!1),ne=d([]),H=d(!1),$=d(!1),M=d(null),L=d(!1),q=d(null),G=d(!1),E=d([]),J=d(!1),V=d(null),C=d(null),_=d({current_page:1,per_page:15,total:0,last_page:1}),F=d(!1),I=d(null),K=d(!1),z=d(!1),P=d(null),Q=d(!1),T=d(null),W=d({}),ie=O(()=>q.value!==null),fe=O(()=>ie.value?"编辑房型":"添加房型"),A=O(()=>T.value!==null),ye=O(()=>A.value?"编辑价库":"添加价库"),v=d({name:"",code:"",external_room_id:"",max_occupancy:2,bed_type:"",room_area:null,description:"",is_active:!0}),p=d({dateRange:null,cost_price:0,sale_price:0,stock_total:0,stock_sold:0}),c=d({biz_date:null,cost_price:0,sale_price:0,stock_total:0,stock_sold:0,source:"manual"}),be={name:[{required:!0,message:"请输入房型名称",trigger:"blur"}],max_occupancy:[{required:!0,message:"请输入最大入住人数",trigger:"blur"},{type:"number",min:1,message:"最大入住人数至少为1",trigger:"blur"}]},ke={dateRange:[{required:!0,message:"请选择日期范围",trigger:"change"}],cost_price:[{required:!0,message:"请输入成本价",trigger:"blur"},{type:"number",min:0,message:"成本价不能小于0",trigger:"blur"}],sale_price:[{required:!0,message:"请输入售价",trigger:"blur"},{type:"number",min:0,message:"售价不能小于0",trigger:"blur"}],stock_total:[{required:!0,message:"请输入总库存",trigger:"blur"},{type:"number",min:0,message:"总库存不能小于0",trigger:"blur"}]},Ve={biz_date:[{required:!0,message:"请选择日期",trigger:"change"}],cost_price:[{required:!0,message:"请输入成本价",trigger:"blur"},{type:"number",min:0,message:"成本价不能小于0",trigger:"blur"}],sale_price:[{required:!0,message:"请输入售价",trigger:"blur"},{type:"number",min:0,message:"售价不能小于0",trigger:"blur"}],stock_total:[{required:!0,message:"请输入总库存",trigger:"blur"},{type:"number",min:0,message:"总库存不能小于0",trigger:"blur"}]},xe=()=>{ue.push("/res-hotels")},Se=async()=>{j.value=!0;try{const t=await S.get(`/res-hotels/${D.params.id}`);x.value=t.data.data,await X()}catch(t){i.error("获取酒店详情失败"),console.error(t),ue.push("/res-hotels")}finally{j.value=!1}},X=async()=>{H.value=!0;try{const t=await S.get("/res-room-types",{params:{hotel_id:D.params.id}});ne.value=t.data.data||[]}catch(t){i.error("获取房型列表失败"),console.error(t)}finally{H.value=!1}},he=()=>{q.value=null,de(),$.value=!0},we=t=>{q.value=t.id,v.value={name:t.name,code:t.code,external_room_id:t.external_room_id||"",max_occupancy:t.max_occupancy||2,bed_type:t.bed_type||"",room_area:t.room_area||null,description:t.description||"",is_active:t.is_active},$.value=!0},Ce=async()=>{M.value&&await M.value.validate(async t=>{var e,n;if(t){L.value=!0;try{const r={...v.value,hotel_id:D.params.id};ie.value?(await S.put(`/res-room-types/${q.value}`,r),i.success("房型更新成功")):(await S.post("/res-room-types",r),i.success("房型创建成功")),$.value=!1,await X()}catch(r){const g=((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.message)||"操作失败";i.error(g)}finally{L.value=!1}}})},Re=async t=>{try{await ge.confirm(`确定要删除房型"${t.name}"吗？删除后无法恢复！`,"提示",{type:"warning",confirmButtonText:"确定删除",cancelButtonText:"取消"}),await S.delete(`/res-room-types/${t.id}`),i.success("删除成功"),await X()}catch(e){e!=="cancel"&&(i.error("删除失败"),console.error(e))}},de=()=>{var t;v.value={name:"",code:"",external_room_id:"",max_occupancy:2,bed_type:"",room_area:null,description:"",is_active:!0},(t=M.value)==null||t.clearValidate()},De=async t=>{V.value=t,G.value=!0,await w(t.id)},w=async t=>{J.value=!0;try{const e={hotel_id:D.params.id,room_type_id:t,page:_.value.current_page,per_page:_.value.per_page};C.value&&C.value.length===2&&(e.start_date=C.value[0],e.end_date=C.value[1]);const n=await S.get("/res-hotel-daily-stocks",{params:e});E.value=n.data.data||[],n.data.current_page!==void 0&&(_.value={current_page:n.data.current_page,per_page:n.data.per_page,total:n.data.total,last_page:n.data.last_page})}catch(e){i.error("获取价库列表失败"),console.error(e)}finally{J.value=!1}},$e=()=>{V.value&&(_.value.current_page=1,w(V.value.id))},ze=t=>{_.value.current_page=t,V.value&&w(V.value.id)},Te=t=>{_.value.per_page=t,_.value.current_page=1,V.value&&w(V.value.id)},Ue=()=>{pe(),F.value=!0},Fe=async()=>{I.value&&await I.value.validate(async t=>{var e,n;if(t){if(p.value.sale_price<p.value.cost_price){i.error("售价不能低于成本价");return}if(p.value.stock_sold>p.value.stock_total){i.error("已售库存不能超过总库存");return}K.value=!0;try{await S.post("/res-hotel-daily-stocks/batch",{hotel_id:D.params.id,room_type_id:V.value.id,start_date:p.value.dateRange[0],end_date:p.value.dateRange[1],cost_price:p.value.cost_price,sale_price:p.value.sale_price,stock_total:p.value.stock_total,stock_sold:p.value.stock_sold||0}),i.success("批量设置成功"),F.value=!1,_.value.current_page=1,await w(V.value.id)}catch(r){const g=((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.message)||"操作失败";i.error(g)}finally{K.value=!1}}})},Be=()=>{T.value=null,ce(),z.value=!0},Ye=t=>{if(t.source==="api"){i.warning("接口推送的价库数据不可编辑");return}T.value=t.id,c.value={biz_date:t.biz_date,cost_price:t.cost_price,sale_price:t.sale_price,stock_total:t.stock_total,stock_sold:t.stock_sold,source:t.source},z.value=!0},Me=async()=>{P.value&&await P.value.validate(async t=>{var e,n;if(t){if(c.value.sale_price<c.value.cost_price){i.error("售价不能低于成本价");return}if(c.value.stock_sold>c.value.stock_total){i.error("已售库存不能超过总库存");return}Q.value=!0;try{const r={hotel_id:D.params.id,room_type_id:V.value.id,...c.value};A.value?(await S.put(`/res-hotel-daily-stocks/${T.value}`,r),i.success("价库更新成功")):(await S.post("/res-hotel-daily-stocks",r),i.success("价库创建成功"),_.value.last_page>0&&(_.value.current_page=_.value.last_page)),z.value=!1,await w(V.value.id)}catch(r){const g=((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.message)||"操作失败";i.error(g)}finally{Q.value=!1}}})},qe=async t=>{var e,n;if(t.source==="api"){i.warning("接口推送的价库数据不可关闭/开启");return}try{const r=t.is_closed?"open":"close";await S.post(`/res-hotel-daily-stocks/${t.id}/${r}`),i.success(t.is_closed?"价库已开启":"价库已关闭"),await w(V.value.id)}catch(r){const g=((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.message)||"操作失败";i.error(g),console.error(r)}},Ee=async t=>{var e,n;try{W.value[t.id]=!0;const r=await S.post(`/res-hotel-daily-stocks/${t.id}/push-to-ota`);r.data.success?i.success(r.data.message||"推送任务已提交，正在后台处理中"):i.error(r.data.message||"推送失败")}catch(r){const g=((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.message)||"推送失败";i.error(g),console.error(r)}finally{W.value[t.id]=!1}},Ie=async t=>{if(t.source==="api"){i.warning("接口推送的价库数据不可删除");return}try{await ge.confirm(`确定要删除日期 ${me(t.biz_date)} 的价库记录吗？`,"提示",{type:"warning",confirmButtonText:"确定删除",cancelButtonText:"取消"}),await S.delete(`/res-hotel-daily-stocks/${t.id}`),i.success("删除成功"),E.value.length===1&&_.value.current_page>1&&_.value.current_page--,await w(V.value.id)}catch(e){e!=="cancel"&&(i.error("删除失败"),console.error(e))}},pe=()=>{var t;p.value={dateRange:null,cost_price:0,sale_price:0,stock_total:0,stock_sold:0},(t=I.value)==null||t.clearValidate()},ce=()=>{var t;c.value={biz_date:null,cost_price:0,sale_price:0,stock_total:0,stock_sold:0,source:"manual"},(t=P.value)==null||t.clearValidate(),T.value=null},Pe=()=>{V.value=null,E.value=[],C.value=null,T.value=null,_.value={current_page:1,per_page:15,total:0,last_page:1}},Ae=t=>{if(!t)return"";const e=new Date(t),n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),g=String(e.getDate()).padStart(2,"0"),Z=String(e.getHours()).padStart(2,"0"),ee=String(e.getMinutes()).padStart(2,"0");return`${n}-${r}-${g} ${Z}:${ee}`},me=t=>{if(!t)return"";const e=new Date(t),n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),g=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${g}`};return He(()=>{Se()}),(t,e)=>{const n=b("el-page-header"),r=b("el-descriptions-item"),g=b("el-tag"),Z=b("el-descriptions"),ee=b("el-divider"),k=b("el-button"),y=b("el-table-column"),_e=b("el-table"),Ne=b("el-card"),B=b("el-input"),f=b("el-form-item"),h=b("el-input-number"),Oe=b("el-switch"),le=b("el-form"),N=b("el-dialog"),ae=b("el-date-picker"),je=b("el-pagination"),te=Le("loading");return R(),ve("div",null,[l(n,{onBack:xe,title:"返回打包酒店列表"},{content:a(()=>[...e[28]||(e[28]=[U("span",null,"打包酒店详情",-1)])]),_:1}),se((R(),Y(Ne,{style:{"margin-top":"20px"}},{default:a(()=>[x.value?(R(),ve("div",Ke,[l(Z,{title:"酒店基本信息",column:2,border:""},{default:a(()=>[l(r,{label:"酒店名称"},{default:a(()=>[u(m(x.value.name),1)]),_:1}),l(r,{label:"酒店编码"},{default:a(()=>[u(m(x.value.code),1)]),_:1}),l(r,{label:"所属景区"},{default:a(()=>{var s;return[u(m(((s=x.value.scenic_spot)==null?void 0:s.name)||"-"),1)]}),_:1}),l(r,{label:"软件服务商"},{default:a(()=>{var s;return[u(m(((s=x.value.software_provider)==null?void 0:s.name)||"-"),1)]}),_:1}),l(r,{label:"外部酒店编号"},{default:a(()=>[u(m(x.value.external_hotel_id||"-"),1)]),_:1}),l(r,{label:"状态"},{default:a(()=>[l(g,{type:x.value.is_active?"success":"danger"},{default:a(()=>[u(m(x.value.is_active?"启用":"禁用"),1)]),_:1},8,["type"])]),_:1}),l(r,{label:"地址"},{default:a(()=>[u(m(x.value.address||"-"),1)]),_:1}),l(r,{label:"联系电话"},{default:a(()=>[u(m(x.value.contact_phone||"-"),1)]),_:1}),l(r,{label:"创建时间"},{default:a(()=>[u(m(Ae(x.value.created_at)),1)]),_:1}),l(r,{label:"酒店描述",span:2},{default:a(()=>[u(m(x.value.description||"-"),1)]),_:1})]),_:1}),l(ee,{"content-position":"left"},{default:a(()=>[...e[29]||(e[29]=[u("房型管理",-1)])]),_:1}),U("div",Qe,[l(k,{type:"primary",onClick:he},{default:a(()=>[...e[30]||(e[30]=[u("添加房型",-1)])]),_:1})]),se((R(),Y(_e,{data:ne.value,border:""},{default:a(()=>[l(y,{prop:"name",label:"房型名称",width:"150"}),l(y,{prop:"code",label:"房型编码",width:"150"}),l(y,{prop:"external_room_id",label:"外部房型ID",width:"150"},{default:a(({row:s})=>[u(m(s.external_room_id||"-"),1)]),_:1}),l(y,{prop:"max_occupancy",label:"最大入住人数",width:"120"}),l(y,{prop:"bed_type",label:"床型",width:"100"}),l(y,{prop:"room_area",label:"房间面积（㎡）",width:"120"},{default:a(({row:s})=>[u(m(s.room_area||"-"),1)]),_:1}),l(y,{prop:"description",label:"描述","show-overflow-tooltip":""}),l(y,{prop:"is_active",label:"状态",width:"100"},{default:a(({row:s})=>[l(g,{type:s.is_active?"success":"danger"},{default:a(()=>[u(m(s.is_active?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(y,{label:"操作",width:"200",fixed:"right"},{default:a(({row:s})=>[l(k,{size:"small",type:"primary",onClick:o=>De(s)},{default:a(()=>[...e[31]||(e[31]=[u("管理价库",-1)])]),_:1},8,["onClick"]),l(k,{size:"small",onClick:o=>we(s)},{default:a(()=>[...e[32]||(e[32]=[u("编辑",-1)])]),_:1},8,["onClick"]),l(k,{size:"small",type:"danger",onClick:o=>Re(s)},{default:a(()=>[...e[33]||(e[33]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[te,H.value]])])):re("",!0)]),_:1})),[[te,j.value]]),l(N,{modelValue:$.value,"onUpdate:modelValue":e[9]||(e[9]=s=>$.value=s),title:fe.value,width:"600px",onClose:de},{footer:a(()=>[l(k,{onClick:e[8]||(e[8]=s=>$.value=!1)},{default:a(()=>[...e[35]||(e[35]=[u("取消",-1)])]),_:1}),l(k,{type:"primary",onClick:Ce,loading:L.value},{default:a(()=>[...e[36]||(e[36]=[u("确定",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(le,{ref_key:"roomTypeFormRef",ref:M,model:v.value,rules:be,"label-width":"120px"},{default:a(()=>[l(f,{label:"房型名称",prop:"name"},{default:a(()=>[l(B,{modelValue:v.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>v.value.name=s),placeholder:"请输入房型名称"},null,8,["modelValue"])]),_:1}),l(f,{label:"房型编码",prop:"code"},{default:a(()=>[l(B,{modelValue:v.value.code,"onUpdate:modelValue":e[1]||(e[1]=s=>v.value.code=s),placeholder:"系统自动生成",disabled:!0},null,8,["modelValue"]),e[34]||(e[34]=U("div",{style:{"font-size":"12px",color:"#909399","margin-top":"5px"}}," 房型编码由系统自动生成，格式：R + 5位数字（如 R00001） ",-1))]),_:1}),l(f,{label:"外部房型ID",prop:"external_room_id"},{default:a(()=>[l(B,{modelValue:v.value.external_room_id,"onUpdate:modelValue":e[2]||(e[2]=s=>v.value.external_room_id=s),placeholder:"用于API对接的第三方房型ID（可选）"},null,8,["modelValue"])]),_:1}),l(f,{label:"最大入住人数",prop:"max_occupancy"},{default:a(()=>[l(h,{modelValue:v.value.max_occupancy,"onUpdate:modelValue":e[3]||(e[3]=s=>v.value.max_occupancy=s),min:1,max:10},null,8,["modelValue"])]),_:1}),l(f,{label:"床型",prop:"bed_type"},{default:a(()=>[l(B,{modelValue:v.value.bed_type,"onUpdate:modelValue":e[4]||(e[4]=s=>v.value.bed_type=s),placeholder:"如：双床、大床等"},null,8,["modelValue"])]),_:1}),l(f,{label:"房间面积（㎡）",prop:"room_area"},{default:a(()=>[l(h,{modelValue:v.value.room_area,"onUpdate:modelValue":e[5]||(e[5]=s=>v.value.room_area=s),min:0,precision:2},null,8,["modelValue"])]),_:1}),l(f,{label:"描述",prop:"description"},{default:a(()=>[l(B,{modelValue:v.value.description,"onUpdate:modelValue":e[6]||(e[6]=s=>v.value.description=s),type:"textarea",rows:3,placeholder:"请输入房型描述"},null,8,["modelValue"])]),_:1}),l(f,{label:"状态",prop:"is_active"},{default:a(()=>[l(Oe,{modelValue:v.value.is_active,"onUpdate:modelValue":e[7]||(e[7]=s=>v.value.is_active=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(N,{modelValue:G.value,"onUpdate:modelValue":e[27]||(e[27]=s=>G.value=s),title:"价库管理",width:"1200px",onClose:Pe},{default:a(()=>{var s;return[U("div",We,[U("span",Xe,"房型："+m((s=V.value)==null?void 0:s.name),1),l(k,{type:"primary",onClick:Ue},{default:a(()=>[...e[37]||(e[37]=[u("批量设置",-1)])]),_:1}),l(k,{type:"primary",onClick:Be},{default:a(()=>[...e[38]||(e[38]=[u("添加价库",-1)])]),_:1}),l(ae,{modelValue:C.value,"onUpdate:modelValue":e[10]||(e[10]=o=>C.value=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{"margin-left":"20px"},"value-format":"YYYY-MM-DD",onChange:$e},null,8,["modelValue"])]),se((R(),Y(_e,{data:E.value,border:""},{default:a(()=>[l(y,{prop:"biz_date",label:"日期",width:"120"},{default:a(({row:o})=>[u(m(me(o.biz_date)),1)]),_:1}),l(y,{prop:"cost_price",label:"成本价",width:"100"},{default:a(({row:o})=>[u(" ¥"+m(o.cost_price),1)]),_:1}),l(y,{prop:"sale_price",label:"售价",width:"100"},{default:a(({row:o})=>[u(" ¥"+m(o.sale_price),1)]),_:1}),l(y,{prop:"stock_total",label:"总库存",width:"100"}),l(y,{prop:"stock_sold",label:"已售",width:"100"}),l(y,{prop:"stock_available",label:"可用库存",width:"100"}),l(y,{prop:"source",label:"来源",width:"100"},{default:a(({row:o})=>[l(g,{type:o.source==="manual"?"primary":"success"},{default:a(()=>[u(m(o.source==="manual"?"人工维护":"接口推送"),1)]),_:2},1032,["type"])]),_:1}),l(y,{prop:"is_closed",label:"状态",width:"100"},{default:a(({row:o})=>[l(g,{type:o.is_closed?"danger":"success"},{default:a(()=>[u(m(o.is_closed?"已关闭":"正常"),1)]),_:2},1032,["type"])]),_:1}),l(y,{label:"操作",width:"350",fixed:"right"},{default:a(({row:o})=>[l(k,{size:"small",onClick:oe=>Ye(o),disabled:o.source==="api"},{default:a(()=>[...e[39]||(e[39]=[u(" 编辑 ",-1)])]),_:1},8,["onClick","disabled"]),l(k,{size:"small",type:o.is_closed?"success":"warning",onClick:oe=>qe(o),disabled:o.source==="api"},{default:a(()=>[u(m(o.is_closed?"开启":"关房"),1)]),_:2},1032,["type","onClick","disabled"]),l(k,{size:"small",type:"primary",onClick:oe=>Ee(o),loading:W.value[o.id]},{default:a(()=>[...e[40]||(e[40]=[u(" 推送到OTA ",-1)])]),_:1},8,["onClick","loading"]),l(k,{size:"small",type:"danger",onClick:oe=>Ie(o),disabled:o.source==="api"},{default:a(()=>[...e[41]||(e[41]=[u(" 删除 ",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1},8,["data"])),[[te,J.value]]),_.value.total>0?(R(),Y(je,{key:0,"current-page":_.value.current_page,"onUpdate:currentPage":e[11]||(e[11]=o=>_.value.current_page=o),"page-size":_.value.per_page,"onUpdate:pageSize":e[12]||(e[12]=o=>_.value.per_page=o),"page-sizes":[10,20,50,100],total:_.value.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px","justify-content":"flex-end"},onSizeChange:Te,onCurrentChange:ze},null,8,["current-page","page-size","total"])):re("",!0),l(N,{modelValue:F.value,"onUpdate:modelValue":e[19]||(e[19]=o=>F.value=o),title:"批量设置价库",width:"600px","append-to-body":"",onClose:pe},{footer:a(()=>[l(k,{onClick:e[18]||(e[18]=o=>F.value=!1)},{default:a(()=>[...e[42]||(e[42]=[u("取消",-1)])]),_:1}),l(k,{type:"primary",onClick:Fe,loading:K.value},{default:a(()=>[...e[43]||(e[43]=[u("确定",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(le,{ref_key:"batchStockFormRef",ref:I,model:p.value,rules:ke,"label-width":"120px"},{default:a(()=>[l(f,{label:"日期范围",prop:"dateRange"},{default:a(()=>[l(ae,{modelValue:p.value.dateRange,"onUpdate:modelValue":e[13]||(e[13]=o=>p.value.dateRange=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),l(f,{label:"成本价",prop:"cost_price"},{default:a(()=>[l(h,{modelValue:p.value.cost_price,"onUpdate:modelValue":e[14]||(e[14]=o=>p.value.cost_price=o),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(f,{label:"售价",prop:"sale_price"},{default:a(()=>[l(h,{modelValue:p.value.sale_price,"onUpdate:modelValue":e[15]||(e[15]=o=>p.value.sale_price=o),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(f,{label:"总库存",prop:"stock_total"},{default:a(()=>[l(h,{modelValue:p.value.stock_total,"onUpdate:modelValue":e[16]||(e[16]=o=>p.value.stock_total=o),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(f,{label:"已售库存",prop:"stock_sold"},{default:a(()=>[l(h,{modelValue:p.value.stock_sold,"onUpdate:modelValue":e[17]||(e[17]=o=>p.value.stock_sold=o),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(N,{modelValue:z.value,"onUpdate:modelValue":e[26]||(e[26]=o=>z.value=o),title:ye.value,width:"600px","append-to-body":"",onClose:ce},{footer:a(()=>[l(k,{onClick:e[25]||(e[25]=o=>z.value=!1)},{default:a(()=>[...e[44]||(e[44]=[u("取消",-1)])]),_:1}),l(k,{type:"primary",onClick:Me,loading:Q.value,disabled:c.value.source==="api"},{default:a(()=>[...e[45]||(e[45]=[u(" 确定 ",-1)])]),_:1},8,["loading","disabled"])]),default:a(()=>[l(le,{ref_key:"stockFormRef",ref:P,model:c.value,rules:Ve,"label-width":"120px"},{default:a(()=>[l(f,{label:"日期",prop:"biz_date"},{default:a(()=>[l(ae,{modelValue:c.value.biz_date,"onUpdate:modelValue":e[20]||(e[20]=o=>c.value.biz_date=o),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD",disabled:A.value},null,8,["modelValue","disabled"])]),_:1}),l(f,{label:"成本价",prop:"cost_price"},{default:a(()=>[l(h,{modelValue:c.value.cost_price,"onUpdate:modelValue":e[21]||(e[21]=o=>c.value.cost_price=o),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(f,{label:"售价",prop:"sale_price"},{default:a(()=>[l(h,{modelValue:c.value.sale_price,"onUpdate:modelValue":e[22]||(e[22]=o=>c.value.sale_price=o),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(f,{label:"总库存",prop:"stock_total"},{default:a(()=>[l(h,{modelValue:c.value.stock_total,"onUpdate:modelValue":e[23]||(e[23]=o=>c.value.stock_total=o),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(f,{label:"已售库存",prop:"stock_sold"},{default:a(()=>[l(h,{modelValue:c.value.stock_sold,"onUpdate:modelValue":e[24]||(e[24]=o=>c.value.stock_sold=o),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),A.value?(R(),Y(f,{key:0,label:"来源"},{default:a(()=>[l(g,{type:c.value.source==="manual"?"primary":"success"},{default:a(()=>[u(m(c.value.source==="manual"?"人工维护":"接口推送"),1)]),_:1},8,["type"]),U("span",Ze,m(c.value.source==="manual"?"（可编辑）":"（接口推送，不可编辑）"),1)]),_:1})):re("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]}),_:1},8,["modelValue"])])}}};export{al as default};
