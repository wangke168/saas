import{_ as A,r as T,i as F,c as v,o as h,b as e,w as t,d as i,k as H,x as K,E as R,e as q,l as z,m as P,s as $,h as s,t as n,f as c}from"./app-DPb7JCSN.js";const j={class:"pkg-order-detail-container"},G={class:"card-header"},J={class:"order-detail"},Q={key:0,class:"detail-content"},U={__name:"Detail",setup(W){const M=K(),k=q(),o=T(null),m=T(!1),D=async()=>{m.value=!0;try{const a=await H.get(`/pkg-orders/${M.params.id}`);o.value=a.data}catch{R.error("获取打包订单详情失败")}finally{m.value=!1}},I=()=>{k.push("/pkg-orders")},p=a=>a?(parseFloat(a)/100).toFixed(2):"0.00",y=a=>a?typeof a=="string"?a.split("T")[0]:a:"",f=a=>a?new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"",x=a=>({paid:"warning",confirmed:"success",failed:"danger",cancelled:"info"})[a]||"",C=a=>({paid:"已支付",confirmed:"已确认",failed:"失败",cancelled:"已取消"})[a]||a,E=a=>({TICKET:"primary",HOTEL:"success"})[a]||"",L=a=>({TICKET:"门票",HOTEL:"酒店"})[a]||a,S=a=>({pending:"info",processing:"warning",success:"success",failed:"danger",pending_manual:"warning"})[a]||"",N=a=>({pending:"待处理",processing:"处理中",success:"成功",failed:"失败",pending_manual:"待人工处理"})[a]||a;return F(()=>{D()}),(a,r)=>{const O=i("el-button"),d=i("el-descriptions-item"),b=i("el-tag"),g=i("el-descriptions"),_=i("el-card"),u=i("el-table-column"),B=i("el-table"),V=z("loading");return h(),v("div",j,[e(_,null,{header:t(()=>[c("div",G,[r[1]||(r[1]=c("span",null,"打包订单详情",-1)),e(O,{onClick:I},{default:t(()=>[...r[0]||(r[0]=[s("返回列表",-1)])]),_:1})])]),default:t(()=>[P((h(),v("div",J,[o.value?(h(),v("div",Q,[e(_,{class:"info-card"},{header:t(()=>[...r[2]||(r[2]=[c("h3",null,"订单基本信息",-1)])]),default:t(()=>[e(g,{column:2,border:""},{default:t(()=>[e(d,{label:"订单号"},{default:t(()=>[s(n(o.value.order_no),1)]),_:1}),e(d,{label:"OTA订单号"},{default:t(()=>[s(n(o.value.ota_order_no||"-"),1)]),_:1}),e(d,{label:"订单状态"},{default:t(()=>[e(b,{type:x(o.value.status)},{default:t(()=>[s(n(C(o.value.status)),1)]),_:1},8,["type"])]),_:1}),e(d,{label:"OTA平台"},{default:t(()=>{var l;return[s(n(((l=o.value.ota_platform)==null?void 0:l.name)||"-"),1)]}),_:1}),e(d,{label:"打包产品"},{default:t(()=>{var l;return[s(n(((l=o.value.product)==null?void 0:l.product_name)||"-"),1)]}),_:1}),e(d,{label:"景区"},{default:t(()=>{var l,w;return[s(n(((w=(l=o.value.product)==null?void 0:l.scenic_spot)==null?void 0:w.name)||"-"),1)]}),_:1}),e(d,{label:"订单总额"},{default:t(()=>[s(" ¥"+n(p(o.value.total_amount)),1)]),_:1}),e(d,{label:"结算金额"},{default:t(()=>[s(" ¥"+n(p(o.value.settlement_amount)),1)]),_:1}),e(d,{label:"下单时间"},{default:t(()=>[s(n(f(o.value.created_at)),1)]),_:1}),e(d,{label:"支付时间"},{default:t(()=>[s(n(f(o.value.paid_at)),1)]),_:1}),e(d,{label:"确认时间"},{default:t(()=>[s(n(f(o.value.confirmed_at)),1)]),_:1})]),_:1})]),_:1}),e(_,{class:"info-card"},{header:t(()=>[...r[3]||(r[3]=[c("h3",null,"酒店信息",-1)])]),default:t(()=>[e(g,{column:2,border:""},{default:t(()=>[e(d,{label:"酒店名称"},{default:t(()=>{var l;return[s(n(((l=o.value.hotel)==null?void 0:l.name)||"-"),1)]}),_:1}),e(d,{label:"房型名称"},{default:t(()=>{var l;return[s(n(((l=o.value.room_type)==null?void 0:l.name)||"-"),1)]}),_:1}),e(d,{label:"入住日期"},{default:t(()=>[s(n(y(o.value.check_in_date)),1)]),_:1}),e(d,{label:"离店日期"},{default:t(()=>[s(n(y(o.value.check_out_date)),1)]),_:1}),e(d,{label:"入住天数"},{default:t(()=>[s(n(o.value.stay_days)+" 天 ",1)]),_:1})]),_:1})]),_:1}),e(_,{class:"info-card"},{header:t(()=>[...r[4]||(r[4]=[c("h3",null,"联系人信息",-1)])]),default:t(()=>[e(g,{column:2,border:""},{default:t(()=>[e(d,{label:"联系人姓名"},{default:t(()=>[s(n(o.value.contact_name||"-"),1)]),_:1}),e(d,{label:"联系电话"},{default:t(()=>[s(n(o.value.contact_phone||"-"),1)]),_:1}),e(d,{label:"联系邮箱"},{default:t(()=>[s(n(o.value.contact_email||"-"),1)]),_:1})]),_:1})]),_:1}),e(_,{class:"info-card"},{header:t(()=>[...r[5]||(r[5]=[c("h3",null,"订单项列表",-1)])]),default:t(()=>[e(B,{data:o.value.items,style:{width:"100%"},border:""},{default:t(()=>[e(u,{prop:"id",label:"ID",width:"80"}),e(u,{label:"类型",width:"100"},{default:t(({row:l})=>[e(b,{type:E(l.item_type)},{default:t(()=>[s(n(L(l.item_type)),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"resource_name",label:"资源名称","min-width":"200"}),e(u,{prop:"quantity",label:"数量",width:"80"}),e(u,{label:"单价",width:"120",align:"right"},{default:t(({row:l})=>[s(" ¥"+n(p(l.unit_price)),1)]),_:1}),e(u,{label:"总价",width:"120",align:"right"},{default:t(({row:l})=>[s(" ¥"+n(p(l.total_price)),1)]),_:1}),e(u,{label:"状态",width:"120"},{default:t(({row:l})=>[e(b,{type:S(l.status)},{default:t(()=>[s(n(N(l.status)),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"resource_order_no",label:"资源方订单号","min-width":"180"}),e(u,{prop:"error_message",label:"错误信息","min-width":"200","show-overflow-tooltip":""}),e(u,{prop:"processed_at",label:"处理时间",width:"180"},{default:t(({row:l})=>[s(n(f(l.processed_at)),1)]),_:1})]),_:1},8,["data"])]),_:1})])):$("",!0)])),[[V,m.value]])]),_:1})])}}},Y=A(U,[["__scopeId","data-v-0d561ffb"]]);export{Y as default};
