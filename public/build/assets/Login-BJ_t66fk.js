import{_ as y,u as V,r as p,a as h,c as x,o as k,b as o,w as s,d as r,e as B,f as C,g as E,h as L,E as c}from"./app-JTASQpWe.js";const N={class:"login-container"},R={__name:"Login",setup(S){const _=B(),f=V(),n=p(null),u=p(!1),a=h({email:"",password:""}),g={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,message:"密码长度至少8位",trigger:"blur"}]},d=()=>{n.value&&n.value.validate(async m=>{var e,t;if(m){u.value=!0;try{await f.login(a.email,a.password),c.success("登录成功"),_.push("/")}catch(l){c.error(((t=(e=l.response)==null?void 0:e.data)==null?void 0:t.message)||"登录失败")}finally{u.value=!1}}})};return(m,e)=>{const t=r("el-input"),l=r("el-form-item"),w=r("el-button"),b=r("el-form"),v=r("el-card");return k(),x("div",N,[o(v,{class:"login-card"},{default:s(()=>[e[3]||(e[3]=C("h2",null,"酒速通-OTA酒景套餐分销系统",-1)),o(b,{model:a,rules:g,ref_key:"formRef",ref:n,onSubmit:E(d,["prevent"])},{default:s(()=>[o(l,{label:"邮箱",prop:"email"},{default:s(()=>[o(t,{modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=i=>a.email=i),type:"email"},null,8,["modelValue"])]),_:1}),o(l,{label:"密码",prop:"password"},{default:s(()=>[o(t,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=i=>a.password=i),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o(l,null,{default:s(()=>[o(w,{type:"primary",loading:u.value,onClick:d,style:{width:"100%"}},{default:s(()=>[...e[2]||(e[2]=[L(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}},A=y(R,[["__scopeId","data-v-624bca73"]]);export{A as default};
